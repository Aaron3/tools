AmCharts.addInitHandler(function(a){function v(a,b,c){var d=b;if(c.categoryAxis.parseDates===!0){if(void 0!==c.dataDateFormat)var e=AmCharts.stringToDate(a,c.dataDateFormat);else var e=new Date(a);d=e.getTime(),d||(d=a)}return d}function w(a,b){var c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=a.length;if(j!=b.length)throw new Error("The parameters values_x and values_y need to have same size!");if(0===j)return[[],[]];for(var k=0;j>k;k++)h=a[k],i=b[k],c+=h,d+=i,f+=h*h,e+=h*i,g++;for(var l=(g*e-c*d)/(g*f-c*c),m=d/g-l*c/g,n=[],o=[],k=0;j>k;k++)h=a[k],i=h*l+m,n.push(h),o.push(i);return[n,o]}for(var b=0;b<a.graphs.length;b++){var d,f,g,h,i,c=a.graphs[b],e=0;if(void 0!==c.bestFitLine){for(var j=[],k=[],l=0;l<a.dataProvider.length;l++){var m=v(a.dataProvider[l][a.categoryField],l,a),n=a.dataProvider[l][c.valueField];void 0!==n&&(j.push(m),k.push(a.dataProvider[l][c.valueField]),void 0===d&&(d=l),e=l,void 0===f&&(f=m),g=m),void 0===h&&(h=m),i=m}var o=w(j,k);if(c.bestFitLine.extend===!0){var p=a.dataProvider.length-1,q=g-f,r=o[1][0],s=o[1][o[1].length-1],t=(s-r)/q;d>0&&(j.unshift(h),k.unshift(r-(f-h)*t),d=0),p>e&&(j.push(i),k.push(s+(i-g)*t),e=p);var o=w(j,k);c.bestFitLine.includeInMinMax=!1}var u=c.bestFitLine;u.valueField=c.valueField+"FitLine",a.graphs.push(u),a.dataProvider[d][u.valueField]=o[1][0],a.dataProvider[e][u.valueField]=o[1][o[1].length-1],u.hideWithParent===!0&&(void 0===a.graphsWithTrendLines&&(a.graphsWithTrendLines=[]),a.graphsWithTrendLines.push(c),c.hiddenBefore=c.hidden===!0,1===a.graphsWithTrendLines.length&&a.addListener("drawn",function(b){for(var c=0;c<a.graphsWithTrendLines.length;c++){var d=a.graphsWithTrendLines[c];if(d.hidden===d.hiddenBefore)return;d.hiddenBefore=d.hidden,d.hidden&&!d.bestFitLine.hidden?a.hideGraph(d.bestFitLine):!d.hidden&&d.bestFitLine.hidden&&a.showGraph(d.bestFitLine)}}))}}},["serial"]);